# **Описание структур данных проекта**

Этот документ описывает структуру двух ключевых объектов данных, используемых в приложении: входные данные для модели (из prompt\_...txt) и ответ модели (из chatgpt\_response\_...json).

### **1\. Структура входных данных (prompt\_...txt)**

Входные данные представляют собой **массив объектов JSON**. Каждый объект в массиве соответствует одной свече и содержит полный набор ее данных и рассчитанных для нее технических индикаторов.

**Пример полей одного объекта (одной свечи):**

* **Основные данные свечи (OHLCV):**  
  * High: Максимальная цена за период.  
  * Low: Минимальная цена за период.  
  * Open: Цена открытия.  
  * Close: Цена закрытия.  
  * Volume: Объем торгов.  
  * Open Time: Время начала периода свечи (например, "2025-05-31 17:00:00").  
* **Ключевые технические индикаторы:**  
  * RSI: Индекс относительной силы.  
  * MACD, MACD\_signal, MACD\_hist: Компоненты индикатора MACD.  
  * OBV: On-Balance Volume.  
  * MA\_20, MA\_50, MA\_100, MA\_200: Скользящие средние с разными периодами.  
  * ATR: Average True Range (средний истинный диапазон).  
  * Stochastic\_Oscillator: Стохастический осциллятор.  
  * Bollinger\_Upper, Bollinger\_Middle, Bollinger\_Lower: Компоненты полос Боллинджера.  
  * ADX: Average Directional Index (индекс среднего направления).  
  * Williams\_%R: Процентный диапазон Уильямса.  
  * Parabolic\_SAR: Параболическая система SAR.  
  * Ichimoku\_A, Ichimoku\_B, Ichimoku\_Base\_Line, Ichimoku\_Conversion\_Line: Компоненты облака Ишимоку.  
  * VWAP: Volume Weighted Average Price (средневзвешенная по объему цена).  
  * Moving\_Average\_Envelope\_Upper, Moving\_Average\_Envelope\_Lower: Конверты скользящих средних.

### **2\. Структура ответа модели (chatgpt\_response\_...json)**

Ответ модели представляет собой **один сложный объект JSON**, содержащий полный текстовый и структурированный анализ. Ключи этого объекта соответствуют различным слоям аналитики, которые должны быть визуализированы на фронтенде.

**Ключевые разделы:**

* primary\_analysis: Объект с текстовым описанием глобального и локального трендов, паттернов и аномалий.  
* support\_resistance\_levels: Объект, содержащий два массива:  
  * supports: Массив объектов уровней поддержки. Каждый объект имеет level (цена), date (дата начала луча) и explanation.  
  * resistances: Аналогичный массив для уровней сопротивления.  
* trend\_lines: Содержит массив lines, где каждый объект описывает одну трендовую линию с type, start\_point и end\_point.  
* fibonacci\_analysis: Содержит анализ Фибоначчи для разных трендов. Каждый объект включает levels (объект с процентными уровнями и ценами), start\_point, end\_point и explanation.  
* elliott\_wave\_analysis: Содержит массив waves для отрисовки волн Эллиотта, а также текстовый forecast и explanation.  
* divergence\_analysis: Массив объектов, описывающих дивергенции. Каждый объект содержит indicator, type, date и explanation.  
* candlestick\_patterns: Массив объектов для свечных паттернов. Каждый содержит date, type, price и explanation.  
* imbalances, unfinished\_zones: Массивы объектов, описывающих зоны дисбаланса и незавершенные зоны для отрисовки в виде прямоугольников.  
* indicators\_analysis: Большой объект, содержащий детальный анализ по каждому стандартному индикатору (RSI, MACD и т.д.).  
* price\_prediction: Содержит текстовый forecast и массив virtual\_candles для отрисовки прогнозных свечей.  
* recommendations: Содержит массив trading\_strategies, где каждая стратегия — это объект с entry\_point, stop\_loss, take\_profit и explanation.
